# 🎯 מדריך למידה אישית - כללי תיקון זמן

## מה זה?

תכונה חדשה שמאפשרת לך ללמד את התוכנה שמשימות מסוימות תמיד לוקחות לך יותר זמן ממה שאת חושבת!

### הבעיה שזה פותר:

> "אני אומרת שתמלול יקח לי חצי שעה, אבל בפועל זה תמיד לוקח שעה וחצי!"

עכשיו התוכנה תלמד את זה ותתקן את ההערכות שלך אוטומטית! 🎉

---

## 📚 איך זה עובד?

### שלב 1: הגדרת כלל תיקון

1. היכנסי למסך הראשי (Dashboard)
2. לחצי על הטאב **"🎯 למידה אישית"**
3. הוסיפי כלל חדש:
   - **בחרי סוג משימה:** למשל "תמלול"
   - **הגדירי מקדם:** למשל 3 (= המשימה לוקחת פי 3)
   - **הוסיפי הערה:** "תמלול תמיד לוקח לי יותר כי אני מוסחת"

### שלב 2: השתמשי בהצעות

כשתיצרי משימה חדשה:

1. תבחרי סוג משימה
2. תכתבי זמן משוער (למשל 30 דקות)
3. **המערכת תציע לך אוטומטית:** 90 דקות (30 × 3)
4. תוכלי לקבל את ההצעה או להתעלם

### שלב 3: למידה אוטומטית

המערכת תלמד מהתוצאות בפועל:

- ✅ כשתסיימי משימות, המערכת תשווה זמן משוער לזמן בפועל
- ✅ המקדם יתעדכן אוטומטית (70% ישן + 30% חדש)
- ✅ ככל שתעשי יותר משימות, המקדם ישתפר

---

## 💡 דוגמאות לשימוש

### דוגמה 1: תמלול

```
אני אומרת: 30 דקות
המערכת יודעת: אצלי תמלול × 3
המערכת ממליצה: 90 דקות ✨
```

### דוגמה 2: פגישות

```
אני אומרת: 60 דקות
המערכת יודעת: פגישות שלי × 1.5 (תמיד מתארכות)
המערכת ממליצה: 90 דקות ✨
```

### דוגמה 3: כתיבה

```
אני אומרת: 120 דקות
המערכת יודעת: כתיבה אצלי × 0.8 (אני מהירה!)
המערכת ממליצה: 96 דקות ✨
```

---

## 🚀 התקנה - IMPORTANT!

### אתה צריכה להריץ את ה-Migration!

התכונה דורשת טבלה חדשה ב-Supabase. הריצי את זה **פעם אחת**:

1. **היכנסי ל-Supabase Dashboard:**
   - https://app.supabase.com
   - בחרי את הפרויקט שלך

2. **עברי ל-SQL Editor:**
   - תפריט צד שמאל → SQL Editor

3. **העתיקי והריצי את הקוד:**
   - פתחי את הקובץ: `supabase/migrations/008_add_time_correction_rules.sql`
   - העתיקי את כל התוכן
   - הדביקי ב-SQL Editor
   - לחצי "Run" (או Ctrl+Enter)

4. **בדקי שזה עבד:**
   ```sql
   SELECT * FROM time_correction_rules;
   ```
   אמור להחזיר טבלה ריקה (זה טוב!)

---

## 🎨 התכונות

### במסך "למידה אישית":

✅ **ניהול כללים:**
- הוספה, עריכה, מחיקה של כללים
- הפעלה/כיבוי של כלל

✅ **סטטיסטיקות:**
- כמה פעמים הכלל הוצע
- כמה פעמים קיבלת את ההצעה
- נתונים בפועל מהיסטוריה

✅ **המלצות חכמות:**
- המערכת מציעה כללים לפי הדיוק שלך
- "הדיוק שלך ב-תמלול הוא 45%, כדאי להגדיר מקדם 2.2"

### בטופס משימה חדשה:

✅ **הצעה אוטומטית:**
- מופיעה כשיש כלל תיקון
- מציגה השוואה: "הערכה שלך: ~~30 דקות~~ → המערכת ממליצה: **90 דקות**"
- כפתור "קבל המלצה" מהיר

✅ **למידה אוטומטית:**
- המקדם מתעדכן אחרי כל משימה שמסיימים
- ממוצע משוקלל: 70% מהמקדם הישן, 30% מהנתונים החדשים

---

## 📊 נתונים טכניים

### הטבלה החדשה: `time_correction_rules`

```sql
- id: UUID (מזהה ייחודי)
- user_id: UUID (המשתמש)
- task_type: TEXT (סוג המשימה)
- time_multiplier: DECIMAL (המקדם, למשל 1.5)
- notes: TEXT (הערות)
- is_active: BOOLEAN (האם פעיל)
- times_applied: INTEGER (כמה פעמים הוצע)
- times_accepted: INTEGER (כמה פעמים התקבל)
- created_at, last_updated: TIMESTAMPTZ
```

### הפונקציה: `auto_update_correction_multiplier()`

טריגר שרץ אוטומטית כשמשימה מסתיימת:

1. בודק אם יש כלל תיקון לסוג המשימה
2. מחשב ממוצע של 10 המשימות האחרונות
3. מעדכן את המקדם: `new = (old × 0.7) + (actual × 0.3)`
4. מגביל את המקדם בין 0.5 ל-5.0

---

## 🔧 תחזוקה

### איך לראות את הכללים שלי?

```sql
SELECT 
  task_type,
  time_multiplier,
  times_applied,
  times_accepted,
  notes
FROM time_correction_rules
WHERE user_id = 'YOUR_USER_ID'
ORDER BY times_applied DESC;
```

### איך לאפס כלל?

```sql
UPDATE time_correction_rules
SET time_multiplier = 1.0
WHERE user_id = 'YOUR_USER_ID' 
  AND task_type = 'transcription';
```

### איך למחוק כל הכללים?

```sql
DELETE FROM time_correction_rules
WHERE user_id = 'YOUR_USER_ID';
```

---

## 💡 טיפים לשימוש

### 1. התחילי עם כללים פשוטים

```
תמלול: × 3
פגישות: × 1.5
כתיבה: × 1.2
```

### 2. תני למערכת ללמוד

- אחרי 5-10 משימות, המקדם ישתפר
- אל תשני ידנית יותר מדי

### 3. השתמשי בהערות

```
"תמלול תמיד לוקח יותר כי אני עושה הפסקות"
"פגישות מתארכות בגלל דיונים"
"כתיבה מהירה אצלי כי יש לי טמפלטים"
```

### 4. בדקי את ההמלצות

- המערכת מציעה כללים לפי הדיוק שלך
- אם הדיוק נמוך, כדאי להגדיר כלל

---

## 🐛 פתרון בעיות

### הכלל לא מוצע בטופס משימה חדשה?

1. ודאי שהכלל פעיל (is_active = true)
2. ודאי שבחרת את סוג המשימה הנכון
3. ודאי שהזנת זמן משוער

### המקדם לא מתעדכן אוטומטית?

1. ודאי שהמשימה הושלמה
2. ודאי שיש זמן משוער וזמן בפועל
3. בדקי בקונסול אם יש שגיאות

### אין המלצות חכמות?

1. צריך לפחות 3 משימות מהסוג הזה
2. הדיוק צריך להיות מתחת ל-70%
3. המערכת מציגה רק 3 המלצות ראשונות

---

## 📝 הערות חשובות

1. **פרטיות:** כל הכללים שלך פרטיים ולא נגישים למשתמשים אחרים
2. **ביטחון:** RLS (Row Level Security) מוגדר על הטבלה
3. **גיבוי:** הכללים נשמרים בדאטהבייס, לא במטמון
4. **מהירות:** השליפה מהירה (אינדקסים מוגדרים)

---

## 🎉 תהני!

התכונה הזו תעזור לך להעריך זמן יותר נכון, לתכנן טוב יותר, ולא להיות מופתעת כשמשימות לוקחות יותר זמן!

**זכרי:** ככל שתשתמשי יותר, המערכת תלמד אותך טוב יותר! 🚀

---

*מדריך זה נוצר ב-17 בדצמבר 2025*

